# Contributing to mods-registry

Thank you for contributing model manifests! This registry powers the `mods` CLI model manager.

## Adding a Model

### 1. Choose the Right Directory

| Model Type | Directory | Example |
|------------|-----------|---------|
| Checkpoint | `manifests/checkpoints/` | FLUX.1 Dev, SDXL |
| LoRA | `manifests/loras/` | Realistic skin, style LoRAs |
| VAE | `manifests/vae/` | SDXL VAE, Flux VAE |
| Text Encoder | `manifests/text_encoders/` | CLIP-L, T5-XXL |
| ControlNet | `manifests/controlnet/` | Depth, Canny |
| Upscaler | `manifests/upscalers/` | 4x UltraSharp |
| Embedding | `manifests/embeddings/` | Textual inversions |
| IP-Adapter | `manifests/ipadapters/` | FaceID, Plus |

### 2. Create a YAML Manifest

Create a file named `<id>.yaml` in the appropriate directory. The `id` must be lowercase with hyphens only.

**Minimum required fields:**

```yaml
id: my-model-name
name: "My Model Display Name"
type: checkpoint  # or lora, vae, etc.

# For single-file models (LoRAs, VAEs, etc.):
file:
  url: https://direct-download-url.com/model.safetensors
  sha256: "abc123..."  # Full SHA256 hash
  size: 186000000      # Size in bytes (integer)
  format: safetensors

# For multi-variant models (checkpoints with fp16/fp8/etc.):
variants:
  - id: fp16
    file: model-fp16.safetensors
    url: https://...
    sha256: "..."
    size: 23800000000
    format: safetensors
    precision: fp16
    vram_required: 24576   # MB
```

### 3. Get the SHA256 Hash

```bash
# If you have the file locally:
sha256sum path/to/model.safetensors

# Or use the verification script (downloads the file):
python scripts/verify_hashes.py manifests/checkpoints/my-model.yaml
```

### 4. Validate

```bash
pip install pyyaml
python scripts/validate.py manifests/checkpoints/my-model.yaml
python scripts/build_index.py  # Make sure it compiles
```

### 5. Submit a PR

- One manifest per PR (unless adding a model with its dependencies)
- Include a brief description of the model
- Make sure `validate.py` passes
- Placeholder hashes (`VERIFY_...`) are acceptable in PRs â€” maintainers will verify

## Guidelines

- **Direct download URLs only.** No JavaScript-required downloads. HuggingFace `/resolve/main/` URLs work great.
- **Accurate file sizes.** Use exact byte counts, not approximations.
- **Proper licensing.** Include the correct license identifier.
- **Dependencies.** If a model requires a VAE or text encoder, add it to `requires`.
- **Don't modify index.json.** It's auto-generated by CI.

## Questions?

Open an issue if you need help adding a model.
